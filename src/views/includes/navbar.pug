//- #navDiary(hx-get="/navbar" hx-swap='innerHTML' hx-trigger="from:body")
//- #navDiary(hx-get="/navbar" hx-swap='innerHTML' hx-ext="path-deps" hx-trigger="path-deps" path-deps="/login")
//- #navDiary(hx-get="/navbar" hx-swap='innerHTML' hx-trigger="faf from:#home")
#navDiary(hx-get="/navbar" hx-swap='innerHTML' hx-trigger="faf from:body")
  nav.navbar.navbar-expand-lg.navbar-light.bg-light
    .container-fluid(hx-boost="true")
      a.navbar-brand(href='#') Chdiary
      button.navbar-toggler(type='button' data-bs-toggle='collapse' data-bs-target='#navbarSupportedContent' aria-controls='navbarSupportedContent' aria-expanded='false' aria-label='Toggle navigation')
        span.navbar-toggler-icon
      #navbarSupportedContent.collapse.navbar-collapse
        ul.navbar-nav.me-auto.mb-2.mb-lg-0
          //- li.nav-item
          #userHome.d-flex.flex-row.me-2(
              hx-get="/main"
              hx-swap='innerHTML'
              hx-target='#mainpage'
              hx-trigger="click"
              hx-replace-url="/"
            )
            a.nav-link.active Home
          if isLoggedIn
            //- hx-replace-url="/"
            //- li.nav-item
            a(
              href="/diary"
              hx-swap='outerHTML'
              hx-target='body'
            ) Diary
            //- a#userDiary.d-flex.flex-row.me-2(
            //-   hx-get="/diary"
            //-   hx-swap='outerHTML'
            //-   hx-target='#home'
            //-   hx-trigger="click"
            //- ) Diary
          li.nav-item
            a.nav-link(href='/about') About

        #userInfo.d-flex.flex-row.me-2.gap-1
          #untilTokenExpired
          if user
            #user Hello #{user.nickname} !
          else
            #anonym Hello Anonymus !

          script(src='./includes/js/navbar.js')

          if exp !== undefined
            script.
              //- let exp = parseInt("#{exp}", 10);
              //- runClock(parseInt("#{exp}", 10));
              console.log("Page loaded at runClock", #{exp})
              window.runClockId = runClock(#{exp});
          //- else
          //-   script.
          //-     htmx.onLoad(function(elt) {
          //-       console.log("Page loaded at navbar")
          //-       window.clearInterval(window.runClockId)
          //-     })

        //- hx-replace-url="/account/home"
        if isLoggedIn
          //- hx-target='#home'
          //- hx-target='#home'
          #userLogout.d-flex.flex-row.me-2(
              hx-get="/logout"
              hx-swap='innerHTML'
              hx-target='#home'
              hx-trigger="click"
              hx-replace-url="/"
            )
            a.nav-link Logout
        else
          #userLogin.d-flex.flex-row.me-2(
              hx-get="/login"
              hx-target='#home'
              hx-trigger="click"
              hx-replace-url="/"
            )
            a.nav-link Login
        //- form.d-flex
        //-   input.form-control.me-2(type='search' placeholder='Search' aria-label='Search')
        //-   button.btn.btn-outline-success(type='submit') Search