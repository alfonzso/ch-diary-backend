DOCTYPE(html)
html(lang='en')
    include includes/header.pug
    body.h-100
      #root.container-fluid.h-100.d-flex.flex-column

        include includes/navbar.pug

        block content

        script.
          //- document.body.addEventListener('htmx:configRequest', function(evt) {
          //-     //- evt.detail.parameters['auth_token'] = getAuthToken(); // add a new parameter into the mix
          //-     evt.detail.parameters['auth_token'] = "#{accessToken}"; // add a new parameter into the mix
          //- });
          document.addEventListener('htmx:afterRequest', function(evt) {
            //- console.log( evt.detail, evt.detail.target.id, evt.detail.pathInfo.requestPath)
            console.log( evt.detail.target.id, evt.detail.pathInfo.requestPath)
            //- console.log(evt.detail, evt.detail.target.id)
            //- console.log(evt.detail.pathInfo.requestPath)
            //- console.log(evt.detail.pathInfo.requestPath === "/logout")
            if (evt.detail.pathInfo.requestPath === "/logout") {
              //-  console.log("logout", window.runClockId)
               window.clearInterval(window.runClockId)
               htmx.find("#untilTokenExpired").innerHTML = ""
            }
          });
        script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")

        include includes/footer.pug